{% extends 'base.html' %}

{% block content %}
<style>
  .purchase-order-wrapper {
    background-color: #f5f7fb;
    min-height: 100vh;
    padding: 2rem 0;
  }
  .purchase-card {
    background: #fff;
    border-radius: 1.5rem;
    box-shadow: 0 0.5rem 1.5rem rgba(13, 110, 253, 0.08);
    padding: 2rem;
    max-width: 700px;
    margin: 0 auto;
  }
  .card-header-custom {
    background: linear-gradient(135deg, #0d6efd 0%, #0dcaf0 100%);
    color: white;
    border-radius: 1rem 1rem 0 0;
    padding: 1.5rem;
    margin: -2rem -2rem 2rem -2rem;
  }
  .form-label {
    font-weight: 600;
    color: #333;
    margin-bottom: 0.5rem;
  }
  .form-control:focus {
    border-color: #0d6efd;
    box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
  }
  .info-alert {
    background-color: #e7f3ff;
    border-right: 4px solid #0d6efd;
    border-radius: 0.5rem;
  }
</style>

<div class="container-fluid purchase-order-wrapper" dir="rtl">
  <div class="row justify-content-center">
    <div class="col-12">
      <div class="purchase-card">
        <div class="card-header-custom">
          <h4 class="mb-0">
            <i class="fas fa-shopping-cart ms-2"></i>إضافة طلب شراء
          </h4>
          <small class="opacity-75">طلب رقم: {{ service_request.id }} - {{ service_request.title }}</small>
        </div>

        <form action="{% url 'create_purchase_order' service_request.id %}" method="POST">
          {% csrf_token %}
          
          <div class="mb-4">
            <label for="purchaseReference" class="form-label">
              مرجع طلب الشراء <span class="text-danger">*</span>
            </label>
            <textarea 
              class="form-control" 
              name="purchase_request_refrence" 
              id="purchaseReference" 
              rows="6" 
              required 
              placeholder="أدخل مرجع طلب الشراء..."></textarea>
            <small class="form-text text-muted">يرجى إدخال رقم المرجع أو تفاصيل طلب الشراء</small>
          </div>

          <div class="alert info-alert mb-4" role="alert">
            <i class="fas fa-info-circle ms-2"></i>
            <strong>ملاحظة:</strong> سيتم ربط طلب الشراء بالتقرير الحالي.
          </div>

          <div class="d-flex justify-content-between gap-3">
            <a href="{% url 'request_detail' service_request.id %}" class="btn btn-secondary">
              <i class="fas fa-times ms-2"></i>إلغاء
            </a>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-check ms-2"></i>تسليم الطلب
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

