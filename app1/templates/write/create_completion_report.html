{% extends 'base.html' %}

{% block content %}
<style>
  .completion-report-wrapper {
    background-color: #f5f7fb;
    min-height: 100vh;
    padding: 2rem 0;
  }
  .completion-card {
    background: #fff;
    border-radius: 1.5rem;
    box-shadow: 0 0.5rem 1.5rem rgba(40, 167, 69, 0.08);
    padding: 2rem;
    max-width: 700px;
    margin: 0 auto;
  }
  .card-header-custom {
    background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
    color: white;
    border-radius: 1rem 1rem 0 0;
    padding: 1.5rem;
    margin: -2rem -2rem 2rem -2rem;
  }
  .form-label {
    font-weight: 600;
    color: #333;
    margin-bottom: 0.5rem;
  }
  .form-control:focus {
    border-color: #28a745;
    box-shadow: 0 0 0 0.2rem rgba(40, 167, 69, 0.25);
  }
  .info-alert {
    background-color: #e7f3ff;
    border-right: 4px solid #0d6efd;
    border-radius: 0.5rem;
  }
</style>

<div class="container-fluid completion-report-wrapper" dir="rtl">
  <div class="row justify-content-center">
    <div class="col-12">
      <div class="completion-card">
        <div class="card-header-custom">
          <h4 class="mb-0">
            <i class="fas fa-check-circle ms-2"></i>إنشاء تقرير إنجاز
          </h4>
          <small class="opacity-75">طلب رقم: {{ service_request.id }} - {{ service_request.title }}</small>
        </div>

        <form action="{% url 'create_completion_report' service_request.id %}" method="POST">
          {% csrf_token %}
          
          <div class="mb-4">
            <label for="completionDetails" class="form-label">
              تفاصيل التقرير <span class="text-danger">*</span>
            </label>
            <textarea 
              class="form-control" 
              name="report_details" 
              id="completionDetails" 
              rows="8" 
              required 
              placeholder="أدخل تفاصيل تقرير الإنجاز..."></textarea>
            <small class="form-text text-muted">يرجى إدخال جميع التفاصيل المتعلقة بإنجاز العمل</small>
          </div>

          <div class="alert info-alert mb-4" role="alert">
            <i class="fas fa-info-circle ms-2"></i>
            <strong>ملاحظة:</strong> سيتم تلقائياً الانتقال إلى المحطة التالية بعد إنشاء التقرير.
          </div>

          <div class="d-flex justify-content-between gap-3">
            <a href="{% url 'request_detail' service_request.id %}" class="btn btn-secondary">
              <i class="fas fa-times ms-2"></i>إلغاء
            </a>
            <button type="submit" class="btn btn-success">
              <i class="fas fa-check ms-2"></i>تسليم التقرير
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}

